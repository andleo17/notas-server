# Migration `20201026030141-add-unique-constraint-to-user-table`

This migration has been generated by andleo17 at 10/25/2020, 10:01:41 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE UNIQUE INDEX "User.nickname_unique" ON "public"."User"("nickname")

CREATE UNIQUE INDEX "User.email_unique" ON "public"."User"("email")
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200930043524-add-state-field-on-group-table..20201026030141-add-unique-constraint-to-user-table
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -39,11 +39,11 @@
 }
 model User {
   id          Int          @id @default(autoincrement())
-  nickname    String
+  nickname    String       @unique
   password    String
-  email       String
+  email       String       @unique
   name        String
   lastname    String
   birthDate   DateTime
   photo       String
@@ -126,12 +126,12 @@
   state            Boolean      @default(true)
   typeActivityId   Int
   typeActivity     TypeActivity @relation(fields: [typeActivityId], references: [id])
   activityId       Int?
-  activity         Activity?    @relation("ActivityToActivity", fields: [activityId], references: [id])
+  parentActivity   Activity?    @relation("ActivityToActivity", fields: [activityId], references: [id])
   groupId          Int
   group            Group        @relation(fields: [groupId], references: [id])
-  activities       Activity[]   @relation("ActivityToActivity")
+  childActivities  Activity[]   @relation("ActivityToActivity")
   grades           Grade[]
 }
 model Grade {
```


